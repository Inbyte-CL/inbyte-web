---
import { getLocalizedRoute } from "@/js/translationUtils";
import { Image } from "astro:assets";
import Star from "@images/headers/star.svg";

// main layout
import BaseLayout from "@/layouts/BaseLayout.astro";

// components
import Button from "@/components/button/Button.astro";

// utils
import { getLocaleFromUrl } from "@/js/localeUtils";

import astronaut from "@images/404/astronaut-nobg.png";

const currLocale = getLocaleFromUrl(Astro.url);
---

<BaseLayout title="404" description="Error 404 page not found." noindex={true}>
	<!-- Animated Stars Background -->
	<div class="dark bg-background text-foreground -mt-16">
		<div class="absolute inset-0 z-0 overflow-hidden" aria-hidden="true">
			<div class="stars"></div>
			<div class="stars2"></div>
		</div>

		<!-- Main Content -->
		<div class="site-container relative z-10">
			<div class="flex min-h-screen flex-col items-center justify-center text-center">
				<!-- Decorative Stars -->
				<Star class="text-primary absolute top-24 left-1/4 h-6 w-6 animate-pulse" />
				<Star class="text-primary absolute top-40 right-1/3 h-4 w-4 animate-pulse delay-1500" />
				<Star class="text-primary absolute bottom-1/3 left-1/5 h-5 w-5 animate-pulse delay-800" />

				<div class="animate-astroFloat">
					<h1 class="h1 font-light">
						<span
							class="from-primary bg-gradient-to-r to-white bg-clip-text text-9xl text-transparent"
						>
							404
						</span>
					</h1>

					<!-- Message -->
					<p class="mb-4 text-2xl md:text-4xl">Houston, we have a problem!</p>
					<p class="text-muted-foreground mb-8 max-w-lg text-lg">
						The page you're looking for has drifted into deep space or never existed in the first
						place.
					</p>

					<!-- Action Buttons -->
					<div class="flex flex-wrap justify-center gap-4">
						<Button href={getLocalizedRoute(currLocale, "/")} variant="primary" class="px-12">
							Return Home
						</Button>
					</div>
				</div>

				<!-- More Decorative Stars -->
				<Star class="text-primary absolute right-1/4 bottom-32 h-7 w-7 animate-pulse delay-2000" />
				<Star class="text-primary absolute top-1/3 left-32 h-5 w-5 animate-pulse delay-1200" />

				<!-- Floating Astronaut -->
				<div class="astronaut absolute h-32 w-32 md:h-48 md:w-48">
					<Image src={astronaut} alt="Astronaut floating in space" class="h-full w-full" />
				</div>
			</div>
		</div>
	</div>
</BaseLayout>

<style>
	/* Floating Animation */
	@keyframes astroFloat {
		0%,
		100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-10px);
		}
	}

	.animate-astroFloat {
		@media (prefers-reduced-motion: no-preference) {
			animation: astroFloat 8s ease-in-out infinite;
		}
	}

	/* Astronaut Animation */
	.astronaut {
		top: 20%;
		right: 10%;
		animation: astronaut 15s ease-in-out infinite;
		z-index: 20;
	}

	@keyframes astronaut {
		0% {
			transform: translate(0, 0) rotate(0deg);
		}
		25% {
			transform: translate(50px, 50px) rotate(45deg);
		}
		50% {
			transform: translate(0, 100px) rotate(90deg);
		}
		75% {
			transform: translate(-50px, 50px) rotate(45deg);
		}
		100% {
			transform: translate(0, 0) rotate(0deg);
		}
	}

	/* Stars Animation */
	.stars,
	.stars2 {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		pointer-events: none;
	}

	.stars {
		background: transparent;
		animation: twinkle 4s ease-in-out infinite;
		background-image:
			radial-gradient(1px 1px at 13% 17%, white, rgba(0, 0, 0, 0)),
			radial-gradient(1px 1px at 28% 42%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 35% 75%, white, rgba(0, 0, 0, 0)),
			radial-gradient(1px 1px at 45% 23%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 58% 87%, white, rgba(0, 0, 0, 0)),
			radial-gradient(1px 1px at 63% 32%, white, rgba(0, 0, 0, 0)),
			radial-gradient(1px 1px at 77% 65%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 85% 15%, white, rgba(0, 0, 0, 0)),
			radial-gradient(1px 1px at 93% 88%, white, rgba(0, 0, 0, 0));
		background-size: 750px 750px;
	}

	.stars2 {
		background: transparent;
		animation: twinkle 6s ease-in-out infinite;
		animation-delay: 1s;
		background-image:
			radial-gradient(2px 2px at 8% 72%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 24% 93%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 42% 12%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 53% 55%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 67% 83%, white, rgba(0, 0, 0, 0)),
			radial-gradient(2px 2px at 88% 35%, white, rgba(0, 0, 0, 0));
		background-size: 900px 900px;
		opacity: 0.5;
	}

	@keyframes twinkle {
		0%,
		100% {
			opacity: 0.3;
		}
		50% {
			opacity: 1;
		}
	}

	/* Pulse animation for the stars */
	@keyframes pulse {
		0%,
		100% {
			opacity: 1;
		}
		50% {
			opacity: 0.6;
		}
	}

	.animate-pulse {
		@media (prefers-reduced-motion: no-preference) {
			animation: pulse 3s ease-in-out infinite;
		}
	}
</style>
